<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width"><title>Ngadimin dari HackToday 2019 | circleous</title><link rel=stylesheet href=/css/main.min.480e0ef6c6aac53eaf38419259058419b9323d67397f61cf2d8ce892d869c560.css integrity="sha256-SA4O9saqxT6vOEGSWQWEGbkyPWc5f2HPLYzokthpxWA=" crossorigin=anonymous><link rel=stylesheet href=/css/codes.min.212a1080bdb9f68724a4aff8ef71b5bf08e662a8f5ef70b13d4d94330d804899.css integrity="sha256-ISoQgL259ockpK/473G1vwjmYqj173CxPU2UMw2ASJk=" crossorigin=anonymous></head><body><header><h1><a href=/>circleous</a></h1><nav><ul><li><a href=/>Home</a></li><li><a aria-current=true class=ancestor href=/posts/>Posts</a></li><li><a href=/tags/>Tags</a></li></ul></nav></header><main><article><header><h1>Ngadimin dari HackToday 2019</h1><time datetime=2019-08-25T00:00:00+07:00>August 25, 2019</time></header><p><img src=hacktoday-logo.png alt=logo><em>codepwnda ini bukan nama baru CSI, bukan juga organisasi atau pun komunitas baru.</em></p><p>Tulisan ini adalah bagian kedua dari seri <em>writeup</em> HackToday, masih membahas dari sisi <em>Ngadimin</em> HackToday 2019.</p><h1 id=kualifikasi>Kualifikasi</h1><p>Sebelumnya, saya mau klarifikasi lebih dahulu xD. Akses platform kami memang stabil, tapi kalau dibandingkan dengan jumlah tim yang terdaftar pada compfest 12, sangat beda jauh. Iya, tim yang terdaftar kali ini hanya sekitar ~50 tim. Tidak heran, untuk server yang mungkin bisa mengakomodir ~500 orang dan realita hanya diakses oleh ~150 orang, bisa dikatakan, ini perbandingan yang kurang relevan xD.</p><h2 id=statistics>statistics</h2><p><img src=hacktoday-stats.png alt=logo><em>top sekret unreleased challs</em></p><p>52 team dengan terdaftar dengan 1 soal, <em>sanity check</em>, mencapai 100% solved percentage. Gak heran, karena ini termasuk free flag. ¯\_(ツ)_/¯</p><p><img src=hacktoday-rw-submission.png alt=submission><em>597 wrong submission. :(</em></p><p>Ada <em>597 wrong submission</em> selama CTF berlangsung dan lebih dari 50% wrong submission berasal dari soal kategori Forensik. Ini cukup menyedihkan sih, mengingat kami dari probset sendiri lebih fokus kepada soal crypto, pwn, rev, dan web. sad.</p><p><img src=https://images-ext-1.discordapp.net/external/-D-TbFsk1aWQu9l5xgYlopUpc8GTrtHadXFRrilgQhA/https/pbs.twimg.com/media/D7uZZvsWsAEXHAm.png alt="guess god"><em>Sebenernya ini bukti nyata dari forensic - guess god, lol.</em></p><p><img src=hacktoday-cloudflare.png alt=cloudflare><em>cloudflare</em></p><h2 id=the-setup>the setup</h2><p><strong>warn</strong>, masih banyak <a href=https://medium.com/@iamalsaher/the-admin-side-of-evlzctf-2019-ccb77d45c74d>tutorial</a> <a href="https://www.youtube.com/watch?v=kUmaKvxdfvg">diluar sana</a> menggunakan cara yang lebih efisien.</p><p>Lanjutan penjelasan pada <em>post</em> sebelumnya, setelah server masuk ke pemilihan platform. Pemilihan platform ini sebenernya agak sulit, tapi pada akhirnya CTFd masih tetap digunakan. Ke-&ldquo;panik&rdquo;-an ini berawal dari kompetisi lain seminggu sebelum HackToday dimulai mengalami downtime yang cukup lama, dan sebenernya udah menjadi <em>known issues</em> di <a href=https://github.com/CTFd/CTFd/issues/1012>CTFd #1012</a>. Database server masih di satu server yang sama tapi berbeda dari instance docker CTFd (Saya ga pakai Google Cloud SQL atau service semacamnya). Ini supaya CTFd dapat di &ldquo;scale&rdquo; dengan mudah karena sebelum jalanin CTFd perlu set <code>DATABASE_URL</code> ke db server yang sudah dibuat sebelumnya dan SECRET<em>KEY dari file <code>.ctfd_secret_key</code> konstan untuk semua _instance</em> CTFd yang akan dijalankan. Info lebih lanjut hubungi <a href=https://github.com/CTFd/CTFd/wiki/Advanced-Deployment>+6221-9696-9293</a> (nvm, just click the link lol). Scaling ini perlu dibarengin sama load balancer, saya sendiri pakai nginx untuk setup load balancer, contoh konfigurasinya,</p><div class=highlight><pre tabindex=0 style=color:#c0caf5;background-color:#1a1b26;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-nginx data-lang=nginx><span style=display:flex><span>    <span style=color:#bb9af7>upstream</span> <span style=color:#9ece6a>ctfd</span> {
</span></span><span style=display:flex><span>        <span style=color:#7dcfff>least_conn</span>;
</span></span><span style=display:flex><span>        <span style=color:#7dcfff>server</span> backend1:<span style=color:#e0af68>8000</span>;
</span></span><span style=display:flex><span>        <span style=color:#7dcfff>server</span> backend2:<span style=color:#e0af68>8001</span>;
</span></span><span style=display:flex><span>        <span style=color:#7dcfff>server</span> backend3:<span style=color:#e0af68>8002</span>;
</span></span><span style=display:flex><span>        <span style=color:#7dcfff>server</span> backend4:<span style=color:#e0af68>8003</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#bb9af7>server</span> {
</span></span><span style=display:flex><span>        <span style=color:#7dcfff>listen</span> <span style=color:#e0af68>50000</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#7dcfff>access_log</span> <span style=color:#9ece6a>/var/log/nginx/ctfd/access.log</span>;
</span></span><span style=display:flex><span>        <span style=color:#7dcfff>error_log</span> <span style=color:#9ece6a>/var/log/nginx/ctfd/error.log</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#7dcfff>proxy_set_header</span> <span style=color:#9ece6a>HOST</span> $host;
</span></span><span style=display:flex><span>        <span style=color:#7dcfff>proxy_set_header</span> <span style=color:#9ece6a>X-Forwarded-Proto</span> $scheme;
</span></span><span style=display:flex><span>        <span style=color:#7dcfff>proxy_set_header</span> <span style=color:#9ece6a>X-Real-IP</span> $remote_addr;
</span></span><span style=display:flex><span>        <span style=color:#7dcfff>proxy_set_header</span> <span style=color:#9ece6a>X-Forwarded-For</span> $proxy_add_x_forwarded_for;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#7dcfff>location</span> <span style=color:#9ece6a>/</span> {
</span></span><span style=display:flex><span>            <span style=color:#7dcfff>proxy_pass</span> <span style=color:#9ece6a>http://ctfd</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span></code></pre></div><p>Advanced configuration bisa dilihat dari <a href=http://nginx.org/en/docs/http/load_balancing.html>dokumentasi nginx</a> atau blog dari <a href=https://www.digitalocean.com/community/tutorials/understanding-nginx-http-proxying-load-balancing-buffering-and-caching>digitalocean</a>.</p><p>Untuk service soal-soal karena perlu lewat tcp, cloudflare perlu di set jadi DNS only.</p><p><img src=hacktoday-cf-dns-only.png alt="dns only"><em>dns only, kalau masih ingat ini dari not.codepwnda.id</em></p><p>jika perlu, scale juga soal-soal yang dirasa cukup unstable untuk masalah koneksi. btw, nginx juga bisa dipakai untuk <a href=https://docs.nginx.com/nginx/admin-guide/load-balancer/tcp-udp-load-balancer/>load balancer TCP/UDP</a>.</p><h1 id=final>Final</h1><p>Para tim finalis bisa dilihat di instagram IT TODAY, <a href=https://www.instagram.com/p/B1JZsmhg625/>link</a>. btw, kalau kualitas soal mau dibandw ingkan dengan beberapa tahun kebelakang, ini sebenarnya final paling buruk dilihat dari banyaknya soal yang memerlukan bruteforce dan guessing. Meskipun dengan banyaknya soal yang &ldquo;guessy&rdquo; dan bruteforce, pada final kali ini kami tidak mempersiapkan banyak soal forensik dan misc dengan harapan mengurangi <em>wrong submisson</em> seperti yang terjadi pada kualifikasi, tapi realitanya tidak. sad. <img src=hacktoday-rw-submission-final.png alt="sad af"> <em>sad af</em></p><p><em>The culprit?</em> satu soal crypto, <em>ezhash</em>, dimana peserta harus mem-bruteforce correct flag, tapi siapa sangka,</p><div class=highlight><pre tabindex=0 style=color:#c0caf5;background-color:#1a1b26;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span><span style=color:#bb9af7>def</span> <span style=color:#7aa2f7>hash</span>(x):
</span></span><span style=display:flex><span>    x <span style=color:#9ece6a;font-weight:700>^=</span> x <span style=color:#9ece6a;font-weight:700>&gt;&gt;</span> <span style=color:#e0af68>16</span>
</span></span><span style=display:flex><span>    x <span style=color:#9ece6a;font-weight:700>*=</span> <span style=color:#e0af68>0xd76aa478</span>
</span></span><span style=display:flex><span>    x <span style=color:#9ece6a;font-weight:700>&amp;=</span> <span style=color:#e0af68>0xffffffff</span>
</span></span><span style=display:flex><span>    x <span style=color:#9ece6a;font-weight:700>^=</span> x <span style=color:#9ece6a;font-weight:700>&gt;&gt;</span> <span style=color:#e0af68>13</span>
</span></span><span style=display:flex><span>    x <span style=color:#9ece6a;font-weight:700>*=</span> <span style=color:#e0af68>0xe8c7b756</span>
</span></span><span style=display:flex><span>    x <span style=color:#9ece6a;font-weight:700>&amp;=</span> <span style=color:#e0af68>0xffffffff</span>
</span></span><span style=display:flex><span>    x <span style=color:#9ece6a;font-weight:700>^=</span> x <span style=color:#9ece6a;font-weight:700>&gt;&gt;</span> <span style=color:#e0af68>14</span>
</span></span><span style=display:flex><span>    <span style=color:#bb9af7>return</span> x
</span></span></code></pre></div><p>hanya karena konstanta yang dipakai bukan bilangan prima, hash collision mudah banget dicapai.</p><p><img src=hacktoday-nosystemissafe.png alt="NO SYSTEM IS SAFE"><em>thanks to siapa pun itu yang sudah membuat tamplate depes ini xD</em></p><p>btw, saya juga membuat soal untuk nge-troll (foto di atas), dimana peserta memang harus benar-benar guess where the flag dimana ini seharusnya menjadi free flag for all, tapi sampai beberapa jam terakhir hanya memiliki sedikit solve. sad.</p><p>Overall setup keseluruhan tidak jauh berbeda dengan kualifikasi, yang berbeda hanya kami tidak menggunakan load balancer sama sekali.</p><h2 id=saya-pamit>saya pamit?</h2><p>Ini mungkin akan menjadi seri terakhir saya untuk menjadi bagian board of ngadimin HackToday mengingat tahun depan saya harus mulai Kuliah Kerja NangidNyata. sad.</p><div><div>Tags:</div><ul><li><a href=/tags/rant/>Rant</a></li></ul></div></article></main><footer><p>&copy; 2025 circleous. Licensed under <a href=https://creativecommons.org/publicdomain/zero/1.0/ target=_blank>CC0</a>.</p></footer></body></html>